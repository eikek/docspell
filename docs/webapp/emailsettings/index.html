<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="author" content="Eike Kettner">
<meta name="description" content="Docspell is a Document Management System (DMS), a system that asists in organizing your piles of documents, resulting from scanners, e-mails and other sources with miminal effort.">
<meta name="keywords" content="document management system dms organizer ocr open source free scan pdf word doc archive gpl machine learning nlp auto tagging"/>
<meta name="robots" content="index,follow"/>
<meta name="image" property="og:image" content="/img/poster.png">
<meta name="title" property="og:title" content="Docspell â€“ Simple Document Organizer">
<meta name="og:image" content="/img/poster.png">
<meta name="og:title" content="Docspell â€“ Simple Document Organizer">
<meta name="og:site_name" content="E-Mail Settings - Docspell">
<meta name="og:url" content="">
<meta name="og:type" content="website">
<meta name="og:description" content="Simple Document Organizer">
<meta name="twitter:title" content="Docspell">
<meta name="twitter:image" content="/img/poster.png">
<meta name="twitter:description" content="Simple Document Organizer">
<meta name="twitter:card" content="summary_large_image">

<link rel="shortcut icon" href="/favicon-mc.ico" type="image/x-icon">
<link rel="icon" href="/favicon-mc.ico" type="image/x-icon">

        <title>E-Mail Settings â€“ Docspell Documentation</title>
        <link rel="stylesheet" href="/styles.css">
    </head>
    <body>
        <section class="hero is-info is-small">
            <div class="hero-head">
                <nav class="navbar">
    <div class="navbar-brand">
        <a class="navbar-item" href="/">
            <span class="icon">
                <img src="/icons/logo-only-36.svg">
            </span>
            <span>
                Docspell
            </span>
        </a>
    </div>
    <div class="navbar-start">
        <a target="_blank"
           href="https://github.com/eikek/docspell"
           class="navbar-item">
            <span class="icon">
                <img src="/icons/github-40.svg">
            </span>
            <span>
                Github
            </span>
        </a>
    </div>
</nav>

            </div>
            <div class="hero-body">
                <div class="columns is-vcentered">
                    <div class="column is-8">
                        <h1 class="title">
                            E-Mail Settings
                        </h1>
                        <h2 class="subtitle">
                            Docspell Documentation
                        </h2>
                    </div>
                    <div class="column">
                        <id id="search"></id>
                    </div>
                </div>
            </div>
        </section>
        <nav class="breadcrumb has-succeeds-separator" aria-label="breadcrumbs"
             style="position:sticky; top: 0; z-index:10;">
            <ul>
                
                
                <li>
                    <a href="https:&#x2F;&#x2F;docspell.org&#x2F;"></a>
                </li>
                
                
                <li>
                    <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;">Overview</a>
                </li>
                
                
                <li>
                    <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;webapp&#x2F;">Web-UI</a>
                </li>
                
                <li>
                    <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;webapp&#x2F;emailsettings&#x2F;">E-Mail Settings</a>
                </li>
            </ul>
        </nav>

        <section class="section pt-2">
            <div class="columns is-desktop">
                <div class="column is-3">
                    <div class="menu"
                         style="position:sticky; top:2rem; z-index:10;">
                        <ul class="menu-list">
                            
                            

                            <p class="menu-label">
                                Web-UI
                            </p>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/uploading/"
                                   >
                                    Uploads
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/metadata/"
                                   >
                                    Meta Data
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/customfields/"
                                   >
                                    Custom Fields
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/curate/"
                                   >
                                    Curate Items
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/multiedit/"
                                   >
                                    Multi Edit
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/finding/"
                                   >
                                    Finding Items
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/itemcard-customize/"
                                   >
                                    Customize Item Card
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/emailsettings/"
                                   class="is-active">
                                    E-Mail Settings
                                </a>
                                
                                <ul class="menu-list">
                                    
                                    <li>
                                        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;webapp&#x2F;emailsettings&#x2F;#smtp-settings">
                                            SMTP Settings
                                        </a>
                                        <ul>
                                            
                                        </ul>
                                    </li>
                                    
                                    <li>
                                        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;webapp&#x2F;emailsettings&#x2F;#imap-settings">
                                            IMAP Settings
                                        </a>
                                        <ul>
                                            
                                        </ul>
                                    </li>
                                    
                                    <li>
                                        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;webapp&#x2F;emailsettings&#x2F;#ssl-tls-starttls">
                                            SSL &#x2F; TLS &#x2F; StartTLS
                                        </a>
                                        <ul>
                                            
                                        </ul>
                                    </li>
                                    
                                    <li>
                                        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;webapp&#x2F;emailsettings&#x2F;#gmail">
                                            GMail
                                        </a>
                                        <ul>
                                            
                                            <li>
                                                <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;webapp&#x2F;emailsettings&#x2F;#via-app-specific-passwords">
                                                    via App specific passwords
                                                </a>
                                            </li>
                                            
                                            <li>
                                                <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;webapp&#x2F;emailsettings&#x2F;#via-oauth2">
                                                    via OAuth2
                                                </a>
                                            </li>
                                            
                                        </ul>
                                    </li>
                                    
                                </ul>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/mailitem/"
                                   >
                                    Send Items Via E-Mail
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/notification/"
                                   >
                                    Notifications
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/scanmailbox/"
                                   >
                                    Scan Mailboxes
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/processing/"
                                   >
                                    Processing Queue
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/autotagging/"
                                   >
                                    Auto Tagging
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/merge/"
                                   >
                                    Merge Items
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/totp/"
                                   >
                                    Two-Factor Authentication
                                </a>
                                
                            </li>
                            
                            
                            <li>
                                <a href="https://docspell.org/docs/webapp/share/"
                                   >
                                    Shares
                                </a>
                                
                            </li>
                            
                        </ul>
                    </div>
                </div>

                <div class="column is-9">
                    <div class="container">
                        <div class="content doc">
                            <p>Docspell has a good integration for E-Mail. You can send e-mails
related to an item and you can import e-mails from your mailbox into
docspell.</p>
<p>This requires to define settings to use for sending and receiving
e-mails. E-Mails are commonly send via
<a href="https://en.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol">SMTP</a>
and for receiving
<a href="https://en.wikipedia.org/wiki/Internet_Message_Access_Protocol">IMAP</a>
is quite common. Docspell has support for SMTP and IMAP. These
settings are associated to a user, so that each user can specify its
own settings separately from others in the collective.</p>
<p><em>Note: Passwords to your e-mail accounts are stored in plain-text in
docspell's database. This is necessary to have docspell connect to
your e-mail account to send mails on behalf of you and receive your
mails.</em></p>
<h1 id="smtp-settings">SMTP Settings<a class="zola-anchor" href="#smtp-settings" aria-label="Anchor link for: smtp-settings">ðŸ”—</a></h1>
<p>For sending mail, you need to provide information to connect to a SMTP
server. Every e-mail provider has this information somewhere
available.</p>
<p>Configure this in <em>User Settings -&gt; E-Mail Settings (SMTP)</em>:</p>
<figure class="image">
    
    
    
    

    <img src="https://docspell.org/docs/webapp/mail-settings-1.png">
</figure>
<p>First, you need to provide some name that is used to recognize this
account. This name is also used in URLs to docspell and so it must not
contain whitespace or any special characters. A good value is the
domain of your provider, for example <code>gmail.com</code>, or something like
that.</p>
<p>These information should be available from your e-mail provider. For
example, for google-mail it is:</p>
<ul>
<li>SMTP Host: <code>smtp.gmail.com</code></li>
<li>SMTP Port: <code>587</code> or <code>465</code></li>
<li>SMTP User: Your Gmail address (for example, example@gmail.com)</li>
<li>SMTP Password: Your Gmail password</li>
<li>SSL: use <code>SSL</code> for port <code>465</code> and <code>StartSSL</code> for port <code>587</code></li>
</ul>
<p>Then you need to define the e-mail address that is used for the <code>From</code>
field. This is in most cases the same address as used for the SMTP
User field.</p>
<p>The <code>Reply-To</code> field is optional and can be set to define a different
e-mail address that your recipients should use to answer a mail.</p>
<p>Once this is setup, you can start sending mails within docspell. It is
possible to set up these settings for multiple providers, so you can
choose from which account you want to send mails.</p>
<h1 id="imap-settings">IMAP Settings<a class="zola-anchor" href="#imap-settings" aria-label="Anchor link for: imap-settings">ðŸ”—</a></h1>
<p>For receiving e-mails, you need to provide information to connect to
an IMAP server. Your e-mail provider should have this information
somewhere available.</p>
<p>Configure this in <em>User Settings -&gt; E-Mail Settings (IMAP)</em>:</p>
<figure class="image">
    
    
    
    

    <img src="https://docspell.org/docs/webapp/mail-settings-2.png">
</figure>
<p>First you need to define a <em>Name</em> to recognize this connection inside
docspell. This name is also used in URLs to docspell and so it must
not contain whitespace or any special characters. A good value is the
domain of your provider, for example <code>gmail.com</code>, or something like
that.</p>
<p>You can provide imap connections to multiple mailboxes.</p>
<p>Here is an example for posteo.de:</p>
<ul>
<li>IMAP Server: <code>posteo.de</code></li>
<li>IMAP Port: 143</li>
<li>IMAP User: Your posteo address</li>
<li>IMAP Password: Your posteo password</li>
<li>SSL: use <code>StartTLS</code></li>
</ul>
<h1 id="ssl-tls-starttls">SSL / TLS / StartTLS<a class="zola-anchor" href="#ssl-tls-starttls" aria-label="Anchor link for: ssl-tls-starttls">ðŸ”—</a></h1>
<p><em>Please Note: If <code>SSL</code> is set to <code>None</code>, then mails will be sent
unencrypted to your mail provider! If <code>Ignore certificate check</code> is
enabled, connections to your mail provider will succeed even if the
provider is wrongly configured for SSL/TLS. This flag should only be
enabled if you know why.</em></p>
<h1 id="gmail">GMail<a class="zola-anchor" href="#gmail" aria-label="Anchor link for: gmail">ðŸ”—</a></h1>
<p>Authenticating with GMail may be not so simple. GMail implements an
authentication scheme called <em>XOAUTH2</em> (at least for Imap). It will
not work with your normal password. This is to avoid giving an
application full access to your gmail account and also to add your
password to the store of different apps.</p>
<h2 id="via-app-specific-passwords">via App specific passwords<a class="zola-anchor" href="#via-app-specific-passwords" aria-label="Anchor link for: via-app-specific-passwords">ðŸ”—</a></h2>
<p>GMail allows to define <a href="https://myaccount.google.com/apppasswords">application specific
passwords</a> (you must, as of
now, enable 2FA to make it available). These are separate unique
passwords solely defined for one specific application. You can
enable/disable this password any time at your google account page.</p>
<p>This makes it possible to use &quot;standard&quot; authentication schemes with
you gmail account via imap. That is, <em>do not</em> enable the <code>Enable OAuth2 authentication â€¦</code> in your imap settings.</p>
<h2 id="via-oauth2">via OAuth2<a class="zola-anchor" href="#via-oauth2" aria-label="Anchor link for: via-oauth2">ðŸ”—</a></h2>
<p>If you don't want to use application specific passwords, you can use
OAuth2 directly. The e-mail integration in docspell relies on the
<a href="https://eclipse-ee4j.github.io/mail">JavaMail</a> library which has
support for XOAUTH2. It also has documentation on what you need to do
on your gmail account: <a href="https://eclipse-ee4j.github.io/mail/OAuth2">https://eclipse-ee4j.github.io/mail/OAuth2</a>.</p>
<p>To enable the auth scheme in docspell, you must enable the <code>Enable OAuth2 authentication â€¦</code> in your imap settings. In this mode, the imap
password is the OAuth2 access token.</p>
<p>The following describes what you need to do at gmail to activate this
for docspell. First you need to go to the <a href="https://console.developers.google.com">Google Developers
Console</a> and create an &quot;App&quot; to
get a Client-Id and a Client-Secret. This &quot;App&quot; will be your instance
of docspell. You tell google that this app may send and read your
mails and then you get an <em>access token</em> that should be used instead
of the password.</p>
<p>Once you setup an App in Google Developers Console, you get the
Client-Id and the Client-Secret, which look something like this:</p>
<ul>
<li>Client-Id: 106701....d8c.apps.googleusercontent.com</li>
<li>Client-Secret: 5Z1...Kir_t</li>
</ul>
<p>Google has a python tool to help with getting this access token.
Download the <code>oauth2.py</code> script from
<a href="https://github.com/google/gmail-oauth2-tools">here</a> and first create
an <em>oauth2-token</em>:</p>
<pre data-lang="bash" style="background-color:#282828;color:#fdf4c1aa;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#fdf4c1;">./oauth2.py --user</span><span style="color:#fe8019;">=</span><span style="color:#fdf4c1;">your.name@gmail.com \
</span><span style="color:#fdf4c1;">   --client_id</span><span style="color:#fe8019;">=</span><span style="color:#fdf4c1;">106701....d8c.apps.googleusercontent.com \
</span><span style="color:#fdf4c1;">   --client_secret</span><span style="color:#fe8019;">=</span><span style="color:#fdf4c1;">5Z1...Kir_t \
</span><span style="color:#fdf4c1;">   --generate_oauth2_token
</span></code></pre>
<p>This will &quot;redirect you&quot; to an URL where you have to authenticate with
google. Afterwards it lets you add permissions to the app for
accessing your mail account. The result is another code you need to
give to the script to proceed:</p>
<pre style="background-color:#282828;color:#fdf4c1aa;"><code><span>4/zwE....q0QBAb-99yD7lw
</span></code></pre>
<p>Then the scripts produces this:</p>
<pre style="background-color:#282828;color:#fdf4c1aa;"><code><span>Refresh Token: 1//09zH.........Lj6oc2SmFlZww
</span><span>Access Token: ya29.a0........SECDQ
</span><span>Access Token Expiration Seconds: 3599
</span></code></pre>
<p>The access token can be used to sign in via IMAP with google. The
Refresh Token doesn't expire and can be used to generate new access
tokens:</p>
<pre style="background-color:#282828;color:#fdf4c1aa;"><code><span>./oauth2.py --user=your.name@gmail.com \
</span><span>   --client_id=106701....d8c.apps.googleusercontent.com \
</span><span>   --client_secret=5Z1...Kir_t \
</span><span>   --refresh_token=1//09zH.........Lj6oc2SmFlZww
</span></code></pre>
<p>Output:</p>
<pre style="background-color:#282828;color:#fdf4c1aa;"><code><span>Access Token: ya29.a0....._q-lX3ypntk3ln0h9Yk
</span><span>Access Token Expiration Seconds: 3599
</span></code></pre>
<p>The problem is that the access token expires. Docspell doesn't support
updating the access token. It could be worked around by setting up a
cron-job or similiar which uses the <code>oauth2.py</code> tool to generate new
access tokens and update your imap settings via a
<a href="https://docspell.org/docs/api/">REST</a> call.</p>
<pre data-lang="bash" style="background-color:#282828;color:#fdf4c1aa;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="font-style:italic;color:#928374;">#!/usr/bin/env bash
</span><span style="color:#fabd2f;">set </span><span style="color:#fdf4c1;">-e
</span><span>
</span><span style="font-style:italic;color:#928374;">## Change this to your values:
</span><span>
</span><span style="color:#fdf4c1;">DOCSPELL_USER</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;[docspell-user]&quot;
</span><span style="color:#fdf4c1;">DOCSPELL_PASSWORD</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;[docspell-password]&quot;
</span><span style="color:#fdf4c1;">DOCSPELL_URL</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;http://localhost:7880&quot;
</span><span style="color:#fdf4c1;">DOCSPELL_IMAP_NAME</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;gmail.com&quot;
</span><span>
</span><span style="color:#fdf4c1;">GMAIL_USER</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;your.name@gmail.com&quot;
</span><span style="color:#fdf4c1;">CLIENT_ID</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;106701....d8c.apps.googleusercontent.com&quot;
</span><span style="color:#fdf4c1;">CLIENT_SECRET</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;secret=5Z1...Kir_t&quot;
</span><span style="color:#fdf4c1;">REFRESH_TOKEN</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;1//09zH.........Lj6oc2SmFlZww&quot;
</span><span style="font-style:italic;color:#928374;"># Path to the oauth2.py tool
</span><span style="color:#fdf4c1;">OAUTH_TOOL</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;./oauth2.py&quot;
</span><span>
</span><span style="font-style:italic;color:#928374;">##############################################################################
</span><span style="font-style:italic;color:#928374;">## Script
</span><span>
</span><span>
</span><span style="font-style:italic;color:#928374;"># Login to docspell and store the auth-token
</span><span style="color:#fdf4c1;">AUTH_DATA</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">$(</span><span style="color:#fdf4c1;">curl --silent -XPOST \
</span><span style="color:#fdf4c1;">                 -H </span><span style="color:#b8bb26;">&#39;Content-Type: application/json&#39; </span><span style="color:#fdf4c1;">\
</span><span style="color:#fdf4c1;">                 --data-binary </span><span style="color:#b8bb26;">&quot;{\&quot;account\&quot;:\&quot;$</span><span style="color:#fdf4c1;">DOCSPELL_USER</span><span style="color:#b8bb26;">\&quot;,\&quot;password\&quot;:\&quot;$</span><span style="color:#fdf4c1;">DOCSPELL_PASSWORD</span><span style="color:#b8bb26;">\&quot;}&quot; </span><span style="color:#fdf4c1;">\
</span><span style="color:#fdf4c1;">                 $DOCSPELL_URL/api/v1/open/auth/login</span><span style="color:#b8bb26;">)
</span><span style="color:#fa5c4b;">if </span><span style="color:#fabd2f;">[ </span><span style="color:#fdf4c1;">$(</span><span style="color:#fabd2f;">echo </span><span style="color:#fdf4c1;">$AUTH_DATA </span><span style="color:#fe8019;">| </span><span style="color:#fdf4c1;">jq .success) </span><span style="color:#fe8019;">== </span><span style="color:#b8bb26;">&quot;false&quot; </span><span style="color:#fabd2f;">]</span><span style="color:#fe8019;">; </span><span style="color:#fa5c4b;">then
</span><span>    </span><span style="color:#fabd2f;">echo </span><span style="color:#b8bb26;">&quot;Auth failed&quot;
</span><span>    </span><span style="color:#fabd2f;">echo </span><span style="color:#fdf4c1;">$AUTH_DATA
</span><span style="color:#fa5c4b;">fi
</span><span style="color:#fdf4c1;">TOKEN</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;$(</span><span style="color:#fabd2f;">echo </span><span style="color:#fdf4c1;">$AUTH_DATA </span><span style="color:#fe8019;">| </span><span style="color:#fdf4c1;">jq -r .token</span><span style="color:#b8bb26;">)&quot;
</span><span>
</span><span>
</span><span style="font-style:italic;color:#928374;"># Get the imap settings
</span><span style="color:#fdf4c1;">UPDATE_URL</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;$</span><span style="color:#fdf4c1;">DOCSPELL_URL</span><span style="color:#b8bb26;">/api/v1/sec/email/settings/imap/$</span><span style="color:#fdf4c1;">DOCSPELL_IMAP_NAME</span><span style="color:#b8bb26;">&quot;
</span><span style="color:#fdf4c1;">IMAP_DATA</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">$(</span><span style="color:#fdf4c1;">curl -s -H </span><span style="color:#b8bb26;">&quot;X-Docspell-Auth: $</span><span style="color:#fdf4c1;">TOKEN</span><span style="color:#b8bb26;">&quot; &quot;$</span><span style="color:#fdf4c1;">UPDATE_URL</span><span style="color:#b8bb26;">&quot;)
</span><span>
</span><span style="color:#fabd2f;">echo </span><span style="color:#b8bb26;">&quot;Current Settings:&quot;
</span><span style="color:#fabd2f;">echo </span><span style="color:#fdf4c1;">$IMAP_DATA </span><span style="color:#fe8019;">| </span><span style="color:#fdf4c1;">jq
</span><span>
</span><span>
</span><span style="font-style:italic;color:#928374;"># Get the new access token
</span><span style="color:#fdf4c1;">ACCESS_TOKEN</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">$(</span><span style="color:#fdf4c1;">$OAUTH_TOOL --user</span><span style="color:#fe8019;">=</span><span style="color:#fdf4c1;">$GMAIL_USER \
</span><span style="color:#fdf4c1;">    --client_id</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;$</span><span style="color:#fdf4c1;">CLIENT_ID</span><span style="color:#b8bb26;">&quot; </span><span style="color:#fdf4c1;">\
</span><span style="color:#fdf4c1;">    --client_secret</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;$</span><span style="color:#fdf4c1;">CLIENT_SECRET</span><span style="color:#b8bb26;">&quot; </span><span style="color:#fdf4c1;">\
</span><span style="color:#fdf4c1;">    --refresh_token</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">&quot;$</span><span style="color:#fdf4c1;">REFRESH_TOKEN</span><span style="color:#b8bb26;">&quot; </span><span style="color:#fe8019;">| </span><span style="color:#fdf4c1;">head -n1 </span><span style="color:#fe8019;">| </span><span style="color:#fdf4c1;">cut -d</span><span style="color:#b8bb26;">&#39;:&#39;</span><span style="color:#fdf4c1;"> -f2 </span><span style="color:#fe8019;">| </span><span style="color:#fdf4c1;">xargs</span><span style="color:#b8bb26;">)
</span><span>
</span><span style="font-style:italic;color:#928374;"># Update settings
</span><span style="color:#fabd2f;">echo </span><span style="color:#b8bb26;">&quot;Updating IMAP settings&quot;
</span><span style="color:#fdf4c1;">NEW_IMAP</span><span style="color:#fe8019;">=</span><span style="color:#b8bb26;">$(</span><span style="color:#fabd2f;">echo </span><span style="color:#fdf4c1;">$IMAP_DATA </span><span style="color:#fe8019;">| </span><span style="color:#fdf4c1;">jq </span><span style="color:#b8bb26;">&quot;.imapPassword |= \&quot;$</span><span style="color:#fdf4c1;">ACCESS_TOKEN</span><span style="color:#b8bb26;">\&quot;&quot;)
</span><span style="color:#fdf4c1;">curl -s -XPUT -H </span><span style="color:#b8bb26;">&quot;X-Docspell-Auth: $</span><span style="color:#fdf4c1;">TOKEN</span><span style="color:#b8bb26;">&quot; </span><span style="color:#fdf4c1;">\
</span><span style="color:#fdf4c1;">     -H </span><span style="color:#b8bb26;">&#39;Content-Type: application/json&#39; </span><span style="color:#fdf4c1;">\
</span><span style="color:#fdf4c1;">     --data-binary </span><span style="color:#b8bb26;">&quot;$</span><span style="color:#fdf4c1;">NEW_IMAP</span><span style="color:#b8bb26;">&quot; &quot;$</span><span style="color:#fdf4c1;">UPDATE_URL</span><span style="color:#b8bb26;">&quot;
</span><span style="color:#fabd2f;">echo
</span><span style="color:#fabd2f;">echo </span><span style="color:#b8bb26;">&quot;New Settings:&quot;
</span><span style="color:#fdf4c1;">curl -s -H </span><span style="color:#b8bb26;">&quot;X-Docspell-Auth: $</span><span style="color:#fdf4c1;">TOKEN</span><span style="color:#b8bb26;">&quot; &quot;$</span><span style="color:#fdf4c1;">UPDATE_URL</span><span style="color:#b8bb26;">&quot; </span><span style="color:#fe8019;">| </span><span style="color:#fdf4c1;">jq
</span></code></pre>

                        </div>
                    </div>
                </div>
            </div>
        </section>

        <footer class="footer">
    <div class="container">
        <div class="content has-text-centered">
            <span>
                Docspell 0.30.1
            </span>
            <span class="ml-1 mr-1">â€¢</span>
            <a href="https://spdx.org/licenses/AGPL-3.0-or-later.html" target="_blank">AGPLv3+</a>
            <span class="ml-1 mr-1">â€¢</span>
            <a href="https://github.com/eikek/docspell" target="_blank">
                Source Code
            </a>
            <span class="ml-1 mr-1">â€¢</span>
            <span>
                Chat on <a href="https://gitter.im/eikek/docspell">Gitter</a>/<a href="https://app.element.io/#/room/#eikek_docspell:gitter.im">Matrix</a>
            </span>
        </div>
    </div>
    
</footer>

        <script type="text/javascript" src="https://docspell.org/elasticlunr.min.js"></script>
<script type="text/javascript" src="https://docspell.org/search_index.en.js"></script>
<script type="text/javascript" src="https://docspell.org/js/searchhelper.js"></script>
<script type="text/javascript" src="https://docspell.org/js/bundle.js"></script>

        <script>
 var initSearch = function() {
     var elmSearch = Elm.Search.init({
         node: document.getElementById("search"),
         flags: {}
     });
     initElmSearch(elmSearch);
 }
 if (document.readyState === "complete" ||
     (document.readyState !== "loading" && !document.documentElement.doScroll)
 ) {
     initSearch();
 } else {
     document.addEventListener("DOMContentLoaded", initSearch);
 }
</script>

        <!-- Fathom - simple website analytics - https://github.com/usefathom/fathom -->
<script>
 (function(f, a, t, h, o, m){
     a[h]=a[h]||function(){
         (a[h].q=a[h].q||[]).push(arguments)
     };
     o=f.createElement('script'),
     m=f.getElementsByTagName('script')[0];
     o.async=1; o.src=t; o.id='fathom-script';
     m.parentNode.insertBefore(o,m)
 })(document, window, '//webstats.daheim.site/tracker.js', 'fathom');
 fathom('set', 'siteId', 'OGJDF');
 fathom('trackPageview');
</script>
<!-- / Fathom -->

    </body>
</html>
