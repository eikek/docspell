<!DOCTYPE html>







<html lang="en">
    <head>
        <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="author" content="Eike Kettner">
<meta name="description" content="Docspell is a Document Management System (DMS), a system that asists in organizing your piles of documents, resulting from scanners, e-mails and other sources with miminal effort.">
<meta name="keywords" content="document management system dms organizer ocr open source free scan pdf word doc archive gpl machine learning nlp auto tagging"/>
<meta name="robots" content="index,follow"/>
<meta name="image" property="og:image" content="/img/poster.png">
<meta name="title" property="og:title" content="Docspell – Simple Document Organizer">
<meta name="og:image" content="/img/poster.png">
<meta name="og:title" content="Docspell – Simple Document Organizer">
<meta name="og:site_name" content="File Processing - Docspell">
<meta name="og:url" content="">
<meta name="og:type" content="website">
<meta name="og:description" content="Simple Document Organizer">
<meta name="twitter:title" content="Docspell">
<meta name="twitter:image" content="/img/poster.png">
<meta name="twitter:description" content="Simple Document Organizer">
<meta name="twitter:card" content="summary_large_image">

<link rel="shortcut icon" href="/favicon-mc.ico" type="image/x-icon">
<link rel="icon" href="/favicon-mc.ico" type="image/x-icon">


        <title>File Processing - Docspell Documentation</title>
        <link rel="stylesheet" href="/styles.css">

        <script type="text/javascript" src="https://docspell.org/elasticlunr.min.js"></script>
<script type="text/javascript" src="https://docspell.org/search_index.en.js"></script>
<script type="text/javascript" src="https://docspell.org/js/searchhelper.js"></script>
<script type="text/javascript" src="https://docspell.org/js/bundle.js"></script>


        <script type="application/javascript" src="/js/light-switch.js"></script>

        <link id="syntax-css" rel="stylesheet" href="">
    </head>
    <body class="h-full dark:bg-stone-900 bg-white text-stone-600 dark:text-stone-300 antialiased">

                <div id="top-bar"
             class="top-0 fixed z-50 w-full flex flex-row justify-start shadow-sm h-12 bg-white dark:bg-stone-900 text-stone-800 dark:text-stone-200 antialiased border-b dark:border-stone-800"
        >

            <a class="inline-flex px-4 items-center hover:bg-amber-600 hover:bg-opacity-10 dark:hover:bg-stone-800" href="/">
                <div class="">
                    <img src="/icons/logo-only-36.svg">
                </div>
                <span class="ml-1 text-xl font-bold font-serif hidden sm:inline">
                    Docspell
                </span>
            </a>

            <div class="flex items-center">
                <div class="text-xs py-1 px-1 rounded-full border opacity-50">
                    0.43.0
                </div>
            </div>

            <div class="flex-grow place-items-end">


            </div>
            <div id="search"></div>
            <a href="/docs" class="inline-flex px-4 items-center hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800"
               title="Documentation"
            >
                <i class="fa fa-book">
                </i>
            </a>
            <a href="/blog" class="inline-flex px-4 items-center hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800"
               title="Blog"
            >
                <i class="fa fa-blog">
                </i>
            </a>
            <a target="_blank" href="https://github.com/eikek/docspell"
               class="inline-flex px-4 items-center hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800"
               title="Github"
            >
                <i class="fab fa-github-alt">
                </i>
            </a>

            <div class="lights-container relative inline-flex px-4 items-center hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800 ">
                <a href="#"
                   class="lights-switch h-full w-full inline-flex items-center"
                   title="Lights on/off" >
                    <i class="fa fa-adjust">
                    </i>
                </a>
                <div class="lights-menu text-sm flex flex-col shadow bg-white dark:bg-stone-800 border dark:border-stone-800 absolute top-12 right-2 divide-y dark:divide-stone-700 hidden">
                    <a class="lights-to-dark flex flex-row items-center py-2 px-4 hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-700 cursor-pointer">
                        <i class="fa fa-moon mr-2"></i>
                        <span>Dark</span>
                    </a>
                    <a class="lights-to-light flex flex-row items-center py-2 px-4 hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-700 cursor-pointer">
                        <i class="fa fa-sun font-thin mr-2"></i>
                        <span>Light</span>
                    </a>
                    <a class="lights-to-system flex flex-row items-center py-2 px-4 hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-700 cursor-pointer">
                        <i class="fa fa-laptop mr-2"></i>
                        <span>System</span>
                    </a>

                </div>
            </div>

        </div>


        <div id="docs-main"
             class="mt-12 flex md:flex-row flex-col w-full h-screen-12 sm:overflow-y-hidden"
        >

            
            <div id="sidebar"
                 class ="mx-1 flex flex-col sm:flex-none md:w-72 overflow-none sm:overflow-y-auto  "
            >

                
  <div class="flex flex-col mt-2">
    
    <div class="w-full px-4 py-2 rounded-lg hover:bg-amber-600 hover:bg-opacity-10 dark:hover:bg-stone-800 dark:text-stone-300 font-medium text-lg dark:text-stone-200  ">
        <a href="https://docspell.org/docs/"
           title=""
           class="block w-full"
        >
            <i class="fa fa-book mr-1"></i>
            Documentation
        </a>
    </div>

    
    
    
    
    
    

    
    
    
    

    <div class="w-full px-4 py-2 rounded-lg hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800 dark:text-stone-300 font-medium text-lg dark:text-stone-200 ">
        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;install&#x2F;quickstart&#x2F;"
           title="There are multiple ways to install Docspell. This section contains detailed instructions."
           class="block w-full"
        >
            Installation
        </a>
    </div>
    
    <div class="mb-2">
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/install/quickstart/" class="w-full block">
                Getting Started
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/install/prereq/" class="w-full block">
                Prerequisites
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/install/docker/" class="w-full block">
                Docker
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/install/download-run/" class="w-full block">
                Manual Installation
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/install/nix/" class="w-full block">
                Nix &#x2F; Nixos
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/install/downgrading/" class="w-full block">
                Downgrading
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/install/rpi/" class="w-full block">
                Raspberry-Pi
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/install/reverseproxy/" class="w-full block">
                Reverse Proxy
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/install/changelog/" class="w-full block">
                Changelog
            </a>
        </div>
        
    </div>
    

    
    
    
    

    
    
    
    

    <div class="w-full px-4 py-2 rounded-lg hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800 dark:text-stone-300 font-medium text-lg dark:text-stone-200 ">
        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;feed&#x2F;"
           title="Shows several ways for getting data into Docspell."
           class="block w-full"
        >
            Documents → Docspell
        </a>
    </div>
    

    
    
    
    

    
    
    
    

    <div class="w-full px-4 py-2 rounded-lg hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800 dark:text-stone-300 font-medium text-lg dark:text-stone-200 ">
        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;features&#x2F;"
           title="A list of features and limitations."
           class="block w-full"
        >
            Features
        </a>
    </div>
    

    
    
    
    

    
    
    
    

    <div class="w-full px-4 py-2 rounded-lg hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800 dark:text-stone-300 font-medium text-lg dark:text-stone-200 ">
        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;configure&#x2F;main&#x2F;"
           title="Describes the configuration file and shows all default settings."
           class="block w-full"
        >
            Configuration
        </a>
    </div>
    
    <div class="mb-2">
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/configure/main/" class="w-full block">
                Main
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/configure/bind/" class="w-full block">
                Bind
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/configure/custom-mapping/" class="w-full block">
                Custom Mappings &amp; Cjk
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/configure/database/" class="w-full block">
                Database
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/configure/file-backends/" class="w-full block">
                File Backends
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/configure/file-processing/" class="w-full block">
                File Processing
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/configure/fulltext-search/" class="w-full block">
                Full-Text Search
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/configure/admin-endpoint/" class="w-full block">
                Admin Endpoint
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/configure/authentication/" class="w-full block">
                Authentication
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/configure/registration/" class="w-full block">
                Registration
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/configure/baseurl/" class="w-full block">
                Base Url
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/configure/defaults/" class="w-full block">
                Default Configuration
            </a>
        </div>
        
    </div>
    

    
    
    
    

    
    
    
    

    <div class="w-full px-4 py-2 rounded-lg hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800 dark:text-stone-300 font-medium text-lg dark:text-stone-200 ">
        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;webapp&#x2F;dashboards&#x2F;"
           title="This section describes the features of the web application."
           class="block w-full"
        >
            Web-Ui
        </a>
    </div>
    
    <div class="mb-2">
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/webapp/dashboards/" class="w-full block">
                Dashboards
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/webapp/uploading/" class="w-full block">
                Uploads
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/webapp/metadata/" class="w-full block">
                Meta Data
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/webapp/customfields/" class="w-full block">
                Custom Fields
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/webapp/curate/" class="w-full block">
                Curate Items
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/webapp/multiedit/" class="w-full block">
                Multi Edit
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/webapp/finding/" class="w-full block">
                Finding Items
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/webapp/bookmarks/" class="w-full block">
                Bookmarks
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/webapp/download-all/" class="w-full block">
                Download All Documents
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/webapp/itemcard-customize/" class="w-full block">
                Customize Item Card
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/webapp/emailsettings/" class="w-full block">
                E-Mail Settings
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/webapp/mailitem/" class="w-full block">
                Send Items Via E-Mail
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/webapp/notification/" class="w-full block">
                Notifications
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/webapp/scanmailbox/" class="w-full block">
                Scan Mailboxes
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/webapp/processing/" class="w-full block">
                Job Queue
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/webapp/autotagging/" class="w-full block">
                Auto Tagging
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/webapp/merge/" class="w-full block">
                Merge Items
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/webapp/totp/" class="w-full block">
                Two-Factor Authentication
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/webapp/share/" class="w-full block">
                Shares
            </a>
        </div>
        
    </div>
    

    
    
    
    

    
    
    
    

    <div class="w-full px-4 py-2 rounded-lg hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800 dark:text-stone-300 font-medium text-lg dark:text-stone-200 ">
        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;query&#x2F;"
           title="The query language is a powerful way to search for documents."
           class="block w-full"
        >
            Query Language
        </a>
    </div>
    

    
    
    
    

    
    
    
    

    <div class="w-full px-4 py-2 rounded-lg hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800 dark:text-stone-300 font-medium text-lg dark:text-stone-200 ">
        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;addons&#x2F;basics&#x2F;"
           title="Describes how addons work."
           class="block w-full"
        >
            Addons
        </a>
    </div>
    
    <div class="mb-2">
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/addons/basics/" class="w-full block">
                Basics
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/addons/using/" class="w-full block">
                Usage
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/addons/writing/" class="w-full block">
                Writing
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/addons/control/" class="w-full block">
                Control Runtime
            </a>
        </div>
        
    </div>
    

    
    
    
    
    
    
    

    
    
    
    

    <div class="w-full px-4 py-2 rounded-lg hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800 dark:text-stone-300 font-medium text-lg dark:text-stone-200 ">
        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;tools&#x2F;cli&#x2F;"
           title="There are several tools distributed with docspell, like a program to watch a folder and import files or a simple android app."
           class="block w-full"
        >
            Tools
        </a>
    </div>
    
    <div class="mb-2">
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/tools/cli/" class="w-full block">
                Cli
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/tools/android/" class="w-full block">
                Android Client
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/tools/ds4e/" class="w-full block">
                Emacs
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/tools/smtpgateway/" class="w-full block">
                Smtp Gateway With Exim
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/tools/paperless-import/" class="w-full block">
                Paperless Import
            </a>
        </div>
        
    </div>
    

    
    
    
    

    
    
    
    

    <div class="w-full px-4 py-2 rounded-lg hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800 dark:text-stone-300 font-medium text-lg dark:text-stone-200 ">
        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;api&#x2F;intro&#x2F;"
           title="Contains documentation about the REST API."
           class="block w-full"
        >
            Api
        </a>
    </div>
    
    <div class="mb-2">
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/api/intro/" class="w-full block">
                Api Introduction
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/api/upload/" class="w-full block">
                Upload Request
            </a>
        </div>
        
    </div>
    

    
    
    
    

    
    
    
    

    <div class="w-full px-4 py-2 rounded-lg hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800 dark:text-stone-300 font-medium text-lg dark:text-stone-200 ">
        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;joex&#x2F;intro&#x2F;"
           title="More information about the job executor component."
           class="block w-full"
        >
            Joex
        </a>
    </div>
    
    <div class="mb-2">
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/joex/intro/" class="w-full block">
                Joex
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  dark:bg-stone-800 border-l-2 dark:border-stone-100 border-stone-800 ">
            <a href="https://docspell.org/docs/joex/file-processing/" class="w-full block">
                File Processing
            </a>
        </div>
        
    </div>
    

    
    
    
    

    
    
    
    

    <div class="w-full px-4 py-2 rounded-lg hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800 dark:text-stone-300 font-medium text-lg dark:text-stone-200 ">
        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;faq&#x2F;"
           title="Frequently asked questions."
           class="block w-full"
        >
            Faq
        </a>
    </div>
    

    
    
    
    

    
    
    
    

    <div class="w-full px-4 py-2 rounded-lg hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800 dark:text-stone-300 font-medium text-lg dark:text-stone-200 ">
        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;dev&#x2F;building&#x2F;"
           title="Contains build instructions and other internal notes."
           class="block w-full"
        >
            Development
        </a>
    </div>
    
    <div class="mb-2">
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/dev/building/" class="w-full block">
                Building Docspell
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/dev/documentation/" class="w-full block">
                Documentation
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/dev/translation/" class="w-full block">
                Translating Web-Ui
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/dev/development/" class="w-full block">
                Tips &amp; Setup
            </a>
        </div>
        
        <div class="py-1 px-2 ml-8  hover:bg-amber-600 hover:bg-opacity-10  dark:hover:bg-stone-800  border-l dark:border-stone-700 ">
            <a href="https://docspell.org/docs/dev/add-language/" class="w-full block">
                Adding New Language
            </a>
        </div>
        
    </div>
    

    
    
</div>



            </div>
            

            <div id="content"
                 class=" w-full px-2 overflow-none sm:overflow-y-auto scrollbar-main scrollbar-thin flex flex-col lg:flex-row justify-center"
            >
                <div class="content max-w-screen-md flex flex-col">
                    <div class="flex-grow">
                        
  
  
  <h1 id="file-processing">File Processing<a class="zola-anchor" href="#file-processing" aria-label="Anchor link for: file-processing">🔗</a></h1>
<p>When uploading a file, it is only saved to the database together with
the given meta information as a "job". The file is not visible in the
ui yet. Then joex takes the next such job and starts processing it.
When processing finished, the item and its files will show up in the
ui.</p>
<p>If an error occurs during processing, the item will be created
anyways, so you can see it. Depending on the error, some information
may not be available.</p>
<p>Processing files may require some resources, like memory and cpu. Many
things can be configured in the config file to adapt it to the machine
it is running on.</p>
<p>Important is the setting <code>docspell.joex.scheduler.pool-size</code> which
defines how many tasks can run in parallel on the machine running
joex. For machines that are not very strong, choosing a <code>1</code> is
recommended.</p>
<h1 id="stages">Stages<a class="zola-anchor" href="#stages" aria-label="Anchor link for: stages">🔗</a></h1>
<pre class="z-code"><code><span class="z-text z-plain">DuplicateCheck -&gt;
</span><span class="z-text z-plain">Extract Archives -&gt;
</span><span class="z-text z-plain">Conversion to PDF -&gt;
</span><span class="z-text z-plain">Text Extraction -&gt;
</span><span class="z-text z-plain">Generate Previews -&gt;
</span><span class="z-text z-plain">Text Analysis
</span></code></pre>
<p>These steps are executed sequentially. There are many config options
available for each step.</p>
<h2 id="external-commands">External Commands<a class="zola-anchor" href="#external-commands" aria-label="Anchor link for: external-commands">🔗</a></h2>
<p>External programs are all configured the same way. You can change the
command (add, remove options etc) in the config file. As an example,
here is the <code>wkhtmltopdf</code> command that is used to convert html files
to pdf:</p>
<pre data-lang="conf" class="language-conf z-code"><code class="language-conf" data-lang="conf"><span class="z-source z-genconfig"><span class="z-meta z-param z-genconfig"><span class="z-variable z-parameter z-genconfig">docspell</span></span><span class="z-keyword z-operator z-genconfig">.</span>joex<span class="z-keyword z-operator z-genconfig">.</span>convert {
</span><span class="z-source z-genconfig"><span class="z-storage z-type z-genconfig">  wkhtmlpdf </span>{
</span><span class="z-source z-genconfig"><span class="z-meta z-param z-genconfig">    <span class="z-variable z-parameter z-genconfig">command</span> <span class="z-keyword z-operator z-genconfig">=</span></span> {
</span><span class="z-source z-genconfig"><span class="z-meta z-param z-genconfig">      <span class="z-variable z-parameter z-genconfig">program</span> <span class="z-keyword z-operator z-genconfig">=</span></span> <span class="z-string z-quoted z-double z-genconfig">&quot;wkhtmltopdf&quot;</span>
</span><span class="z-source z-genconfig"><span class="z-meta z-param z-genconfig">      <span class="z-variable z-parameter z-genconfig">args</span> <span class="z-keyword z-operator z-genconfig">=</span></span> [
</span><span class="z-source z-genconfig">        <span class="z-string z-quoted z-double z-genconfig">&quot;-s&quot;</span><span class="z-keyword z-operator z-genconfig">,</span>
</span><span class="z-source z-genconfig">        <span class="z-string z-quoted z-double z-genconfig">&quot;A4&quot;</span><span class="z-keyword z-operator z-genconfig">,</span>
</span><span class="z-source z-genconfig">        <span class="z-string z-quoted z-double z-genconfig">&quot;--encoding&quot;</span><span class="z-keyword z-operator z-genconfig">,</span>
</span><span class="z-source z-genconfig">        <span class="z-string z-quoted z-double z-genconfig">&quot;{{encoding}}&quot;</span><span class="z-keyword z-operator z-genconfig">,</span>
</span><span class="z-source z-genconfig">        <span class="z-string z-quoted z-double z-genconfig">&quot;--load-error-handling&quot;</span><span class="z-keyword z-operator z-genconfig">,</span> <span class="z-string z-quoted z-double z-genconfig">&quot;ignore&quot;</span><span class="z-keyword z-operator z-genconfig">,</span>
</span><span class="z-source z-genconfig">        <span class="z-string z-quoted z-double z-genconfig">&quot;--load-media-error-handling&quot;</span><span class="z-keyword z-operator z-genconfig">,</span> <span class="z-string z-quoted z-double z-genconfig">&quot;ignore&quot;</span><span class="z-keyword z-operator z-genconfig">,</span>
</span><span class="z-source z-genconfig">        <span class="z-string z-quoted z-double z-genconfig">&quot;-&quot;</span><span class="z-keyword z-operator z-genconfig">,</span>
</span><span class="z-source z-genconfig">        <span class="z-string z-quoted z-double z-genconfig">&quot;{{outfile}}&quot;</span>
</span><span class="z-source z-genconfig">      ]
</span><span class="z-source z-genconfig"><span class="z-meta z-param z-genconfig">      <span class="z-variable z-parameter z-genconfig">timeout</span> <span class="z-keyword z-operator z-genconfig">=</span></span> <span class="z-string z-quoted z-double z-genconfig">&quot;2 minutes&quot;</span>
</span><span class="z-source z-genconfig">    }
</span><span class="z-source z-genconfig"><span class="z-meta z-param z-genconfig">    <span class="z-variable z-parameter z-genconfig">working-dir</span> <span class="z-keyword z-operator z-genconfig">=</span></span> ${java<span class="z-keyword z-operator z-genconfig">.</span>io<span class="z-keyword z-operator z-genconfig">.</span>tmpdir}<span class="z-string z-quoted z-double z-genconfig">&quot;/docspell-convert&quot;</span>
</span><span class="z-source z-genconfig">  }
</span><span class="z-source z-genconfig">}
</span></code></pre>
<p>Strings in <code>{{…}}</code> are replaced by docspell with the appropriate
values at runtime. However, based on your use case you can just set
constant values or add other options. This might be necessary when
there are different version installed where changes in the command
line are required. As you see for <code>wkhtmltopdf</code> the page size is fixed
to DIN A4. Other commands are configured like this as well.</p>
<p>For the default values, please see the <a href="https://docspell.org/docs/configure/defaults/#joex">configuration
page</a>.</p>
<h2 id="duplicate-check">Duplicate Check<a class="zola-anchor" href="#duplicate-check" aria-label="Anchor link for: duplicate-check">🔗</a></h2>
<p>If specified, the uploaded file is checked via a sha256 hash, if it
has been uploaded before. If so, it is removed from the set of
uploaded files. You can define this with the upload metadata.</p>
<p>If this results in an empty set, the processing ends.</p>
<h2 id="extract-archives">Extract Archives<a class="zola-anchor" href="#extract-archives" aria-label="Anchor link for: extract-archives">🔗</a></h2>
<p>If a file is a <code>zip</code> or <code>eml</code> (e-mail) file, it is extracted and its
entries are added to the file set. The original (archive) file is kept
in the database, but removed from further processing.</p>
<h2 id="conversion-to-pdf">Conversion to PDF<a class="zola-anchor" href="#conversion-to-pdf" aria-label="Anchor link for: conversion-to-pdf">🔗</a></h2>
<p>All files are converted to a PDF file. How this is done depends on the
file type. External programs are required, which must be installed on
the machine running joex. The config file allows to specify the exact
commands used.</p>
<p>See the section <code>docspell.joex.convert</code> in the config file.</p>
<p>The following config options apply to the conversion as a whole:</p>
<pre data-lang="conf" class="language-conf z-code"><code class="language-conf" data-lang="conf"><span class="z-source z-genconfig"><span class="z-meta z-param z-genconfig"><span class="z-variable z-parameter z-genconfig">docspell</span></span><span class="z-keyword z-operator z-genconfig">.</span>joex<span class="z-keyword z-operator z-genconfig">.</span>convert {
</span><span class="z-source z-genconfig"><span class="z-meta z-param z-genconfig">  <span class="z-variable z-parameter z-genconfig">converted-filename-part</span> <span class="z-keyword z-operator z-genconfig">=</span></span> <span class="z-string z-quoted z-double z-genconfig">&quot;converted&quot;</span>
</span><span class="z-source z-genconfig"><span class="z-meta z-param z-genconfig">  <span class="z-variable z-parameter z-genconfig">max-image-size</span> <span class="z-keyword z-operator z-genconfig">=</span></span> ${docspell<span class="z-keyword z-operator z-genconfig">.</span>joex<span class="z-keyword z-operator z-genconfig">.</span>extraction<span class="z-keyword z-operator z-genconfig">.</span>ocr<span class="z-keyword z-operator z-genconfig">.</span>max<span class="z-keyword z-operator z-genconfig">-</span>image<span class="z-keyword z-operator z-genconfig">-</span>size}
</span><span class="z-source z-genconfig">}
</span></code></pre>
<p>The first setting defines a suffix that is appended to the original
file name to name the converted file. You can set an empty string to
keep the same filename as the original. The extension is always
changed to <code>.pdf</code>, of course.</p>
<p>The second option defines a limit for reading images. Some images may
be small as a file but uncompressed very large. To avoid allocating
too much memory, there is a limit. It defaults to 14mp.</p>
<h3 id="html">Html<a class="zola-anchor" href="#html" aria-label="Anchor link for: html">🔗</a></h3>
<p>Html files are converted with the external tool
<a href="https://wkhtmltopdf.org/">wkhtmltopdf</a>. It produces quite nice
results by using the webkit rendering engine. So the resulting PDF
looks just like in a browser.</p>
<h3 id="images">Images<a class="zola-anchor" href="#images" aria-label="Anchor link for: images">🔗</a></h3>
<p>Images are converted using
<a href="https://github.com/tesseract-ocr">tesseract</a>.</p>
<p>This might be interesting, if you want to try a different language
that is not available in docspell's settings yet. Tesseract also adds
the extracted text as a separate layer to the PDF.</p>
<p>For images, tesseract is configured to create a text and a pdf file.</p>
<h3 id="text">Text<a class="zola-anchor" href="#text" aria-label="Anchor link for: text">🔗</a></h3>
<p>Plaintext files are treated as markdown. You can modify the results by
providing some custom css.</p>
<p>The resulting HTML files are then converted to PDF via <code>wkhtmltopdf</code>
as described above.</p>
<h3 id="office">Office<a class="zola-anchor" href="#office" aria-label="Anchor link for: office">🔗</a></h3>
<p>To convert office files, <a href="https://www.libreoffice.org/">Libreoffice</a>
is required and used via the command line tool
<a href="https://github.com/unoconv/unoconv">unoconv</a>.</p>
<p>To improve performance, it is recommended to start a libreoffice
listener by running <code>unoconv -l</code> in a separate process.</p>
<h3 id="pdf">PDF<a class="zola-anchor" href="#pdf" aria-label="Anchor link for: pdf">🔗</a></h3>
<p>PDFs can be converted into PDFs, which may sound silly at first. But
PDFs come in many different flavors and may not contain a separate
text layer, making it impossible to "copy &amp; paste" text in them. So
you can optionally use the tool
<a href="https://github.com/jbarlow83/OCRmyPDF">ocrmypdf</a> to create a PDF/A
type PDF file containing a text layer with the extracted text.</p>
<p>It is recommended to install ocrympdf, but it also is optional. If it
is enabled but fails, the error is not fatal and the processing will
continue using the original pdf for extracting text. You can also
disable it to remove the errors from the processing logs.</p>
<p>The <code>--skip-text</code> option is necessary to not fail on "text" pdfs
(where ocr is not necessary). In this case, the pdf will be converted
to PDF/A.</p>
<h2 id="text-extraction">Text Extraction<a class="zola-anchor" href="#text-extraction" aria-label="Anchor link for: text-extraction">🔗</a></h2>
<p>Text extraction also depends on the file type. Some tools from the
convert section are used here, too.</p>
<p>Text is tried to extract from the original file. If that can't be done
or results in an error, the converted file is tried next.</p>
<h3 id="html-1">Html<a class="zola-anchor" href="#html-1" aria-label="Anchor link for: html-1">🔗</a></h3>
<p>Html files are not used directly, but the converted PDF file is used
to extract the text. This makes sure that the text is extracted you
actually see. The conversion is done anyways and the resulting PDF
already has a text layer.</p>
<h3 id="images-1">Images<a class="zola-anchor" href="#images-1" aria-label="Anchor link for: images-1">🔗</a></h3>
<p>For images, <a href="https://github.com/tesseract-ocr">tesseract</a> is used
again. In most cases this step is not executed, because the text has
already been extracted in the conversion step. But if the conversion
would have failed for some reason, tesseract is called here (with
different options).</p>
<h3 id="text-1">Text<a class="zola-anchor" href="#text-1" aria-label="Anchor link for: text-1">🔗</a></h3>
<p>This is obviously trivial :)</p>
<h3 id="office-1">Office<a class="zola-anchor" href="#office-1" aria-label="Anchor link for: office-1">🔗</a></h3>
<p>MS Office files are processed using a library without any external
tool. It uses <a href="https://poi.apache.org/">apache poi</a> which is well
known for these tasks.</p>
<p>A rich text file (<code>.rtf</code>) is procssed by Java "natively" (using their
standard library).</p>
<p>OpenDocument files are proecessed using the ODS/ODT/ODF parser from
tika.</p>
<h3 id="pdf-1">PDF<a class="zola-anchor" href="#pdf-1" aria-label="Anchor link for: pdf-1">🔗</a></h3>
<p>PDF files are first checked for a text layer. If this returns some
text that is greater than the configured minimum length, it is used.
Otherwise, OCR is started for the whole pdf file page by page.</p>
<pre data-lang="conf" class="language-conf z-code"><code class="language-conf" data-lang="conf"><span class="z-source z-genconfig"><span class="z-meta z-param z-genconfig"><span class="z-variable z-parameter z-genconfig">docspell</span></span><span class="z-keyword z-operator z-genconfig">.</span>joex {
</span><span class="z-source z-genconfig"><span class="z-storage z-type z-genconfig">  extraction </span>{
</span><span class="z-source z-genconfig"><span class="z-storage z-type z-genconfig">    pdf </span>{
</span><span class="z-source z-genconfig"><span class="z-meta z-param z-genconfig">      <span class="z-variable z-parameter z-genconfig">min-text-len</span> <span class="z-keyword z-operator z-genconfig">=</span></span> <span class="z-constant z-numeric z-genconfig">500</span>
</span><span class="z-source z-genconfig">    }
</span><span class="z-source z-genconfig">  }
</span><span class="z-source z-genconfig">}
</span></code></pre>
<p>After OCR both texts are compared and the longer is used. Since PDFs
can contain text and images, it might be safer to always do OCR, but
this is something to choose by the user.</p>
<p>PDF ocr is comprised of multiple steps. At first only the first
<code>page-range</code> pages are extracted to avoid too long running tasks
(someone submit an ebook for example). But you can disable this limit
by setting a <code>-1</code>. After all, text that is not extracted, won't be
indexed either and is therefore not searchable. It depends on your
machine/setup.</p>
<p>Another limit is <code>max-image-size</code> which defines the size of an image
in pixel (<code>width * height</code>) where processing is skipped.</p>
<p>Then <a href="https://www.ghostscript.com/">ghostscript</a> is used to extract
single pages into image files and
<a href="https://github.com/Flameeyes/unpaper">unpaper</a> is used to optimize
the images for ocr. Unpaper is optional, if it is not found, it is
skipped, which may be a compromise on slow machines.</p>
<pre data-lang="conf" class="language-conf z-code"><code class="language-conf" data-lang="conf"><span class="z-source z-genconfig"><span class="z-meta z-param z-genconfig"><span class="z-variable z-parameter z-genconfig">docspell</span></span><span class="z-keyword z-operator z-genconfig">.</span>joex {
</span><span class="z-source z-genconfig"><span class="z-storage z-type z-genconfig">  extraction </span>{
</span><span class="z-source z-genconfig"><span class="z-storage z-type z-genconfig">    ocr </span>{
</span><span class="z-source z-genconfig"><span class="z-meta z-param z-genconfig">      <span class="z-variable z-parameter z-genconfig">max-image-size</span> <span class="z-keyword z-operator z-genconfig">=</span></span> <span class="z-constant z-numeric z-genconfig">14000000</span>
</span><span class="z-source z-genconfig"><span class="z-meta z-param z-genconfig">      <span class="z-variable z-parameter z-genconfig">page-range</span> </span>{
</span><span class="z-source z-genconfig"><span class="z-meta z-param z-genconfig">        <span class="z-variable z-parameter z-genconfig">begin</span> <span class="z-keyword z-operator z-genconfig">=</span></span> <span class="z-constant z-numeric z-genconfig">10</span>
</span><span class="z-source z-genconfig">      }
</span><span class="z-source z-genconfig"><span class="z-storage z-type z-genconfig">      ghostscript </span>{
</span><span class="z-source z-genconfig"><span class="z-storage z-type z-genconfig">        command </span>{
</span><span class="z-source z-genconfig"><span class="z-meta z-param z-genconfig">          <span class="z-variable z-parameter z-genconfig">program</span> <span class="z-keyword z-operator z-genconfig">=</span></span> <span class="z-string z-quoted z-double z-genconfig">&quot;gs&quot;</span>
</span><span class="z-source z-genconfig"><span class="z-meta z-param z-genconfig">          <span class="z-variable z-parameter z-genconfig">args</span> <span class="z-keyword z-operator z-genconfig">=</span></span> [ <span class="z-string z-quoted z-double z-genconfig">&quot;-dNOPAUSE&quot;</span>
</span><span class="z-source z-genconfig">                 <span class="z-keyword z-operator z-genconfig">,</span> <span class="z-string z-quoted z-double z-genconfig">&quot;-dBATCH&quot;</span>
</span><span class="z-source z-genconfig">                 <span class="z-keyword z-operator z-genconfig">,</span> <span class="z-string z-quoted z-double z-genconfig">&quot;-dSAFER&quot;</span>
</span><span class="z-source z-genconfig">                 <span class="z-keyword z-operator z-genconfig">,</span> <span class="z-string z-quoted z-double z-genconfig">&quot;-sDEVICE=tiffscaled8&quot;</span>
</span><span class="z-source z-genconfig">                 <span class="z-keyword z-operator z-genconfig">,</span> <span class="z-string z-quoted z-double z-genconfig">&quot;-sOutputFile={{outfile}}&quot;</span>
</span><span class="z-source z-genconfig">                 <span class="z-keyword z-operator z-genconfig">,</span> <span class="z-string z-quoted z-double z-genconfig">&quot;{{infile}}&quot;</span>
</span><span class="z-source z-genconfig">                 ]
</span><span class="z-source z-genconfig"><span class="z-meta z-param z-genconfig">          <span class="z-variable z-parameter z-genconfig">timeout</span> <span class="z-keyword z-operator z-genconfig">=</span></span> <span class="z-string z-quoted z-double z-genconfig">&quot;5 minutes&quot;</span>
</span><span class="z-source z-genconfig">        }
</span><span class="z-source z-genconfig"><span class="z-meta z-param z-genconfig">        <span class="z-variable z-parameter z-genconfig">working-dir</span> <span class="z-keyword z-operator z-genconfig">=</span></span> ${java<span class="z-keyword z-operator z-genconfig">.</span>io<span class="z-keyword z-operator z-genconfig">.</span>tmpdir}<span class="z-string z-quoted z-double z-genconfig">&quot;/docspell-extraction&quot;</span>
</span><span class="z-source z-genconfig">      }
</span><span class="z-source z-genconfig"><span class="z-storage z-type z-genconfig">      unpaper </span>{
</span><span class="z-source z-genconfig"><span class="z-storage z-type z-genconfig">        command </span>{
</span><span class="z-source z-genconfig"><span class="z-meta z-param z-genconfig">          <span class="z-variable z-parameter z-genconfig">program</span> <span class="z-keyword z-operator z-genconfig">=</span></span> <span class="z-string z-quoted z-double z-genconfig">&quot;unpaper&quot;</span>
</span><span class="z-source z-genconfig"><span class="z-meta z-param z-genconfig">          <span class="z-variable z-parameter z-genconfig">args</span> <span class="z-keyword z-operator z-genconfig">=</span></span> [ <span class="z-string z-quoted z-double z-genconfig">&quot;{{infile}}&quot;</span><span class="z-keyword z-operator z-genconfig">,</span> <span class="z-string z-quoted z-double z-genconfig">&quot;{{outfile}}&quot;</span> ]
</span><span class="z-source z-genconfig"><span class="z-meta z-param z-genconfig">          <span class="z-variable z-parameter z-genconfig">timeout</span> <span class="z-keyword z-operator z-genconfig">=</span></span> <span class="z-string z-quoted z-double z-genconfig">&quot;5 minutes&quot;</span>
</span><span class="z-source z-genconfig">        }
</span><span class="z-source z-genconfig">      }
</span><span class="z-source z-genconfig"><span class="z-storage z-type z-genconfig">      tesseract </span>{
</span><span class="z-source z-genconfig"><span class="z-storage z-type z-genconfig">        command </span>{
</span><span class="z-source z-genconfig"><span class="z-meta z-param z-genconfig">          <span class="z-variable z-parameter z-genconfig">program</span> <span class="z-keyword z-operator z-genconfig">=</span></span> <span class="z-string z-quoted z-double z-genconfig">&quot;tesseract&quot;</span>
</span><span class="z-source z-genconfig"><span class="z-meta z-param z-genconfig">          <span class="z-variable z-parameter z-genconfig">args</span> <span class="z-keyword z-operator z-genconfig">=</span></span> [<span class="z-string z-quoted z-double z-genconfig">&quot;{{file}}&quot;</span>
</span><span class="z-source z-genconfig">                 <span class="z-keyword z-operator z-genconfig">,</span> <span class="z-string z-quoted z-double z-genconfig">&quot;stdout&quot;</span>
</span><span class="z-source z-genconfig">                 <span class="z-keyword z-operator z-genconfig">,</span> <span class="z-string z-quoted z-double z-genconfig">&quot;-l&quot;</span>
</span><span class="z-source z-genconfig">                 <span class="z-keyword z-operator z-genconfig">,</span> <span class="z-string z-quoted z-double z-genconfig">&quot;{{lang}}&quot;</span>
</span><span class="z-source z-genconfig">                 ]
</span><span class="z-source z-genconfig"><span class="z-meta z-param z-genconfig">          <span class="z-variable z-parameter z-genconfig">timeout</span> <span class="z-keyword z-operator z-genconfig">=</span></span> <span class="z-string z-quoted z-double z-genconfig">&quot;5 minutes&quot;</span>
</span><span class="z-source z-genconfig">        }
</span><span class="z-source z-genconfig">      }
</span><span class="z-source z-genconfig">    }
</span><span class="z-source z-genconfig">  }
</span><span class="z-source z-genconfig">}
</span></code></pre>
<h1 id="generating-previews">Generating Previews<a class="zola-anchor" href="#generating-previews" aria-label="Anchor link for: generating-previews">🔗</a></h1>
<p>Previews are generated from the converted PDF of every file. The first
page of each file is converted into an image file. The config file
allows to specify a dpi which is used to render the pdf page. The
default is set to 32dpi, which results roughly in a 200x300px image.
For comparison, a standard A4 is usually rendered at 96dpi, which
results in a 790x1100px image.</p>
<pre data-lang="conf" class="language-conf z-code"><code class="language-conf" data-lang="conf"><span class="z-source z-genconfig"><span class="z-meta z-param z-genconfig"><span class="z-variable z-parameter z-genconfig">docspell</span></span><span class="z-keyword z-operator z-genconfig">.</span>joex {
</span><span class="z-source z-genconfig"><span class="z-storage z-type z-genconfig">  extraction </span>{
</span><span class="z-source z-genconfig"><span class="z-storage z-type z-genconfig">    preview </span>{
</span><span class="z-source z-genconfig"><span class="z-meta z-param z-genconfig">      <span class="z-variable z-parameter z-genconfig">dpi</span> <span class="z-keyword z-operator z-genconfig">=</span></span> <span class="z-constant z-numeric z-genconfig">32</span>
</span><span class="z-source z-genconfig">    }
</span><span class="z-source z-genconfig">  }
</span><span class="z-source z-genconfig">}
</span></code></pre>
<div class="my-3 rounded border border-yellow-300 bg-yellow-200 bg-opacity-40 text-yellow-600 shadow shadow-yellow-200  dark:bg-amber-500 dark:bg-opacity-30 dark:text-amber-100 dark:border-amber-700 dark:shadow-none">
    <div class="px-1 py-1 border-b border-yellow-300 text-yellow-600 dark:text-amber-300 font-medium w-full bg-yellow-300 bg-opacity-50 dark:bg-amber-700 dark:border-amber-700">
        <i class="fa fa-info mx-2" ></i>
        Please note
    </div>

    <div class="px-2">
        <p>When this is changed, you must re-generate all preview images. Check
the api for this, there is an endpoint to regenerate all preview
images for a collective. The <a href="../../tools/cli/">cli tool</a> can be
used for this.</p>

    </div>
</div>
<h1 id="text-analysis">Text Analysis<a class="zola-anchor" href="#text-analysis" aria-label="Anchor link for: text-analysis">🔗</a></h1>
<p>Finally, the extracted text is analysed to find possible metadata that
can be attached to the new item. There are two different approaches
provided.</p>
<p>The basic idea here is, that instead of <em>you defining textual rules</em> to
apply tags and other things, these rules <em>are found for you</em> based on
what you have provided so far.</p>
<p>Docspell relies on the <a href="https://nlp.stanford.edu/software/">Stanford NLP
Library</a> for its AI features.
Among other things they provide a classifier and NER annotators. The
latter is also a classifier, that associates a label to terms in a
text. It finds out whether some term is probably an organization, a
person etc. It tries to “understand” the structure of the text, like
verb, nouns and their relation.</p>
<p>The two approaches used are sketched below. They have both advantages
and disadvantages and are by default used together. However, depending
on the document languages, not all approaches are possible. They also
have different memory footprints, and you might want to disable some
features if running on low-end machines.</p>
<h2 id="classification">Classification<a class="zola-anchor" href="#classification" aria-label="Anchor link for: classification">🔗</a></h2>
<p>If you enabled classification in the config file, a model is trained
periodically from a collective's files. Very roughly speaking… this
model contains the essence of "patterns" in the text that are likeley
related to a tag, a corrpesondent etc.</p>
<p>When a new document arrives, this model is used to ask for what
metadata (tag, correspondent, etc) it thinks is likely to apply here.</p>
<p>Training the model is a rather resource intensive process. How much
memory is needed, depends on the number of documents to learn from and
the size of text to consider. Both can be limited in the config file.
The default values might require a heap of 1.4G if you have many and
large documents. The maximum text length is set to 5000 characters. If
<em>all</em> your documents would be that large, adjusting these values might
be necessary. A model is trained periodically, the schedule can be
defined in your collective settings. Although learning is resource
intensive, using an existing model is quite cheap and fast.</p>
<p>For tags, you can define the tag categories that should be trained (or
that should not be trained). Docspell assigns one tag (or none) from
all tags in a category to a new document.</p>
<p>Note that tags that can not be derived from the text only, should
probably be excluded from learning. For example, if you tag all your
items with <code>Done</code> at some point, it may falsly learn patterns to this
tag and tag your new documents with <code>Done</code>.</p>
<p>The admin can also limit the number of documents to train with in the
config file to control the memory footprint when training.</p>
<p>Classification is used in Docspell once for guessing tags and also for
finding correspondent and concerned entities. For correspondent and
concerned entities, the NLP approach is used first and the classifier
results then fill missing values.</p>
<h2 id="natural-language-processing">Natural Language Processing<a class="zola-anchor" href="#natural-language-processing" aria-label="Anchor link for: natural-language-processing">🔗</a></h2>
<p>NLP is the other approach that works a bit differently. In this
approach, algorithms are used that find lanugage properties from the
given text, for example which terms are nouns, organization or person
names etc. This also requires a statistical model, but this time for a
whole language. These are also provided by <a href="https://nlp.stanford.edu/software/">Stanford
NLP</a>, but not for all languages.
So whether this can be used depends on the document language. Models
exist for German, English, French and Spanish currently.</p>
<p>Then <a href="https://nlp.stanford.edu/software/">Stanford NLP</a> also allows to
run custom rules against a text. This can be used as a fallback for
terms where the statistical model didn't succeed. But it can also be
used by itself. Docspell derives these rules from your address book,
so it can find terms in the document text that match your organization
and person names. This does not depend on the document language.</p>
<p>By default, Docspell does both: it first uses the statistical language
model (if available for the given language) and then runs the
address-book derived rules as a last step on so far unclassified
terms. This allows for the best results. If more than one candidate is
found, the "most likely" one is set on the item and others are stored
as suggestions.</p>
<p>The statistical model approach works generally very well, i.e. for
large address books. Normally, a document contains only very few
organizations or person names. So it is more efficient to check these
few against your (probably large) address book; in contrast to testing
hundreds of company names against a single document. It can also find
things <em>not</em> in your address book (but this is unused in Docspell
currently). However, it might not detect all or there are no
statistical models for your language. Then the address book is used to
automatically create rules that are run against the document.</p>
<p>Both ways require memory, it depends on the size of your address book
and on the size of the language models (they vary for each language).
In the config file, you can specify different modes of operation for
nlp processing as follows:</p>
<ul>
<li>mode <code>full</code>: creates the complete nlp pipeline, requiring the most
amount of memory, providing the best results. I'd recommend to run
joex with a heap size of a least 1.4G (for English only, it can be
lower that that).</li>
<li>mode <code>basic</code>: it only loads the NER tagger. This doesn't work as
well as the complete pipeline, because some NLP steps are simply
skipped. But it gives quite good results already and uses less
memory. I'd recommend to run joex with at least 500m heap in this
mode.</li>
<li>mode <code>regexonly</code>: this doesn't load any statistical models and is
therefore much lighter on memory (depending on the address book
size, of course). It will use the address book to create regex rules
and match them against your document. Memory usage then doesn't
depend on the document language.</li>
<li>mode <code>disabled</code>: this disables nlp processing. Then only the
classifier is run (unless disabled).</li>
</ul>
<p>Note that mode <code>full</code> and <code>basic</code> is only relevant for the languages
where models are available. For all other languages, it is effectively
the same as <code>regexonly</code>.</p>
<p>The config file allows to specify a limit for texts to analyse in
general. Large texts result in higher memory consumption. By default,
the first 10'000 characters are taken into account.</p>
<p>Then, for the <code>regexonly</code> mode, you can restrict the number of address
book entries that are used to create the rule set via
<code>regex-ner.max-entries</code>. This may be useful to reduce memory
footprint.</p>
<p>The setting <code>clear-stanford-nlp-interval</code> allows to define an idle
time after which the language models are cleared from memory. This
allows memory to be reclaimed by the OS. The timer starts after the
last file has been processed. If you can afford it, it is recommended
to disable it by setting it to <code>0</code>.</p>

  



                    </div>

                    <footer class="w-full pt-8 pb-4 px-8 mt-4 bg-stone-50 dark:bg-stone-800 bg-opacity-80 dark:bg-opacity-50">
  <div class="text-center text-sm">
        <span>
            Docspell 0.43.0
        </span>
        <span class="ml-1 mr-1">•</span>
        <a href="https://spdx.org/licenses/AGPL-3.0-or-later.html" target="_blank">AGPLv3+</a>
        <span class="ml-1 mr-1">•</span>
        <a href="https://github.com/eikek/docspell" target="_blank">
            Source Code
        </a>
        <span class="ml-1 mr-1">•</span>
        <span>
            Chat on <a href="https://gitter.im/eikek/docspell" >Gitter</a>/<a href="https://app.element.io/#/room/#eikek_docspell:gitter.im" class="link">Matrix</a>
        </span>


    
    <div class="flex-grow flex flex-row justify-end items-end text-xs opacity-60">
        <a href="https://github.com/eikek/docspell/edit/current-docs/website/site/content/docs&#x2F;joex&#x2F;file-processing.md"
           title="Edit this page on Github"
           target="_blank"
        >
            <i class="fa fa-edit "></i>
            Edit
        </a>
    </div>
    
    </div>

    
</footer>

                </div>

                
                <div class="hidden pl-2 text-sm font-light mt-2 flex-col w-48 sticky top-4  lg:flex ">

                    
                    <div>
                        <i class="fa fa-hashtag mr-1"></i>
                        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;joex&#x2F;file-processing&#x2F;#file-processing" class="hover:text-stone-900 dark:hover:text-stone-100">
                            File Processing
                        </a>
                        
                    </div>

                    
                    <div>
                        <i class="fa fa-hashtag mr-1"></i>
                        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;joex&#x2F;file-processing&#x2F;#stages" class="hover:text-stone-900 dark:hover:text-stone-100">
                            Stages
                        </a>
                        
                        <div class="pl-4 opacity-75">
                            
                            <div class="border-l-2 dark:border-stone-700 pl-1">
                                <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;joex&#x2F;file-processing&#x2F;#external-commands" class="hover:text-stone-900 dark:hover:text-stone-100">
                                    External Commands
                                </a>
                            </div>
                            
                            <div class="border-l-2 dark:border-stone-700 pl-1">
                                <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;joex&#x2F;file-processing&#x2F;#duplicate-check" class="hover:text-stone-900 dark:hover:text-stone-100">
                                    Duplicate Check
                                </a>
                            </div>
                            
                            <div class="border-l-2 dark:border-stone-700 pl-1">
                                <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;joex&#x2F;file-processing&#x2F;#extract-archives" class="hover:text-stone-900 dark:hover:text-stone-100">
                                    Extract Archives
                                </a>
                            </div>
                            
                            <div class="border-l-2 dark:border-stone-700 pl-1">
                                <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;joex&#x2F;file-processing&#x2F;#conversion-to-pdf" class="hover:text-stone-900 dark:hover:text-stone-100">
                                    Conversion to PDF
                                </a>
                            </div>
                            
                            <div class="border-l-2 dark:border-stone-700 pl-1">
                                <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;joex&#x2F;file-processing&#x2F;#text-extraction" class="hover:text-stone-900 dark:hover:text-stone-100">
                                    Text Extraction
                                </a>
                            </div>
                            
                        </div>
                        
                    </div>

                    
                    <div>
                        <i class="fa fa-hashtag mr-1"></i>
                        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;joex&#x2F;file-processing&#x2F;#generating-previews" class="hover:text-stone-900 dark:hover:text-stone-100">
                            Generating Previews
                        </a>
                        
                    </div>

                    
                    <div>
                        <i class="fa fa-hashtag mr-1"></i>
                        <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;joex&#x2F;file-processing&#x2F;#text-analysis" class="hover:text-stone-900 dark:hover:text-stone-100">
                            Text Analysis
                        </a>
                        
                        <div class="pl-4 opacity-75">
                            
                            <div class="border-l-2 dark:border-stone-700 pl-1">
                                <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;joex&#x2F;file-processing&#x2F;#classification" class="hover:text-stone-900 dark:hover:text-stone-100">
                                    Classification
                                </a>
                            </div>
                            
                            <div class="border-l-2 dark:border-stone-700 pl-1">
                                <a href="https:&#x2F;&#x2F;docspell.org&#x2F;docs&#x2F;joex&#x2F;file-processing&#x2F;#natural-language-processing" class="hover:text-stone-900 dark:hover:text-stone-100">
                                    Natural Language Processing
                                </a>
                            </div>
                            
                        </div>
                        
                    </div>

                    
                </div>
                
            </div>
        </div>
        <script>
 var initSearch = function() {
     var elmSearch = Elm.Search.init({
         node: document.getElementById("search"),
         flags: {}
     });
     initElmSearch(elmSearch);
 }
 if (document.readyState === "complete" ||
     (document.readyState !== "loading" && !document.documentElement.doScroll)
 ) {
     initSearch();
 } else {
     document.addEventListener("DOMContentLoaded", initSearch);
 }
</script>

        <!-- Fathom - simple website analytics - https://github.com/usefathom/fathom -->
<script>
 (function(f, a, t, h, o, m){
     a[h]=a[h]||function(){
         (a[h].q=a[h].q||[]).push(arguments)
     };
     o=f.createElement('script'),
     m=f.getElementsByTagName('script')[0];
     o.async=1; o.src=t; o.id='fathom-script';
     m.parentNode.insertBefore(o,m)
 })(document, window, '//webstats.daheim.site/tracker.js', 'fathom');
 fathom('set', 'siteId', 'OGJDF');
 fathom('trackPageview');
</script>
<!-- / Fathom -->

    </body>

</html>
